<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7. Casos de Uso Avanzados | Claude Code para macOS</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tokyo-night-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <header>
        <div class="container header-content">
            <a href="index.html" class="logo">
                <div class="logo-icon">ü§ñ</div>
                <span>Claude Code Docs</span>
            </a>
            <div class="nav-controls">
                <select id="page-selector" class="page-selector"></select>
                <button id="theme-toggle" class="theme-toggle">üåô</button>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="progress-indicator">
                <span id="progress-indicator">P√°gina 8 de 9</span>
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width: 88.88%"></div>
                </div>
            </div>

            <div class="content-wrapper">
                <h1>7. Casos de Uso Avanzados</h1>

                <p>Aprende a usar Claude Code para escenarios complejos y profesionales que van m√°s all√° del desarrollo b√°sico. Estos casos de uso demuestran el verdadero poder de la IA aplicada al desarrollo de software.</p>

                <h2>üîß Refactorizaci√≥n de C√≥digo Legacy</h2>

                <p>Modernizar bases de c√≥digo antiguas es una de las tareas m√°s desafiantes. Claude Code puede ayudarte a hacerlo de forma sistem√°tica y segura.</p>

                <h3>Caso: Migrar de JavaScript ES5 a TypeScript Moderno</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Paso 1: An√°lisis inicial del c√≥digo legacy
claude "Analiza este archivo legacy.js y crea un plan de migraci√≥n a TypeScript con types estrictos. Identifica patrones antiguos y sugiere reemplazos modernos."

# Paso 2: Conversi√≥n gradual
claude "Convierte legacy.js a TypeScript manteniendo la funcionalidad exacta. Usa interfaces para tipos de datos, async/await en lugar de callbacks, y ES6+ features apropiados."

# Paso 3: Agregar tests de regresi√≥n
claude "Crea tests unitarios completos para legacy.ts que verifiquen que la funcionalidad es id√©ntica al c√≥digo original."

# Paso 4: Optimizaci√≥n post-migraci√≥n
claude "Refactoriza legacy.ts para usar patrones modernos de TypeScript: generics, utility types, y mejores pr√°cticas de 2025."</code></pre>
                </div>

                <h3>Ejemplo Pr√°ctico: Refactorizar Sistema de Autenticaci√≥n</h3>

                <div class="alert info">
                    <div class="alert-icon">üìã</div>
                    <div class="alert-content">
                        <h4>C√≥digo Legacy Original</h4>
                        <p>Sistema de auth con callbacks anidados, sin tipos, y patrones obsoletos.</p>
                    </div>
                </div>

                <div class="code-block">
                    <pre><code class="language-javascript">// auth-legacy.js (c√≥digo original)
var AuthService = function() {
    this.users = {};
};

AuthService.prototype.login = function(username, password, callback) {
    var self = this;
    db.query('SELECT * FROM users WHERE username = ?', [username], function(err, results) {
        if (err) return callback(err);
        if (results.length === 0) return callback(new Error('User not found'));

        bcrypt.compare(password, results[0].password, function(err, match) {
            if (err) return callback(err);
            if (!match) return callback(new Error('Invalid password'));

            jwt.sign({userId: results[0].id}, SECRET, function(err, token) {
                if (err) return callback(err);
                callback(null, token);
            });
        });
    });
};</code></pre>
                </div>

                <div class="code-block">
                    <pre><code class="language-bash"># Prompt para Claude
claude "Refactoriza auth-legacy.js a TypeScript moderno:
1. Convierte a clase con tipos estrictos
2. Usa async/await en lugar de callbacks
3. Implementa manejo de errores robusto
4. Agrega validaci√≥n de inputs
5. Usa Prisma ORM en lugar de queries SQL directas
6. Implementa rate limiting
7. Agrega logging estructurado"</code></pre>
                </div>

                <div class="alert success">
                    <div class="alert-icon">‚úÖ</div>
                    <div class="alert-content">
                        <h4>Resultado: C√≥digo Modernizado</h4>
                        <p>Sistema type-safe, async/await, validaci√≥n robusta, y pr√°cticas modernas de seguridad.</p>
                    </div>
                </div>

                <h3>Estrategia de Refactorizaci√≥n Segura</h3>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üîç</div>
                        <h3>1. An√°lisis</h3>
                        <p>Claude analiza el c√≥digo legacy e identifica dependencias, patrones obsoletos, y riesgos.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üß™</div>
                        <h3>2. Tests Primero</h3>
                        <p>Crea tests que documenten el comportamiento actual antes de cambiar nada.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üîÑ</div>
                        <h3>3. Refactor Gradual</h3>
                        <p>Refactoriza m√≥dulo por m√≥dulo, manteniendo tests pasando en cada paso.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">‚ú®</div>
                        <h3>4. Modernizaci√≥n</h3>
                        <p>Aplica patrones modernos manteniendo compatibilidad y estabilidad.</p>
                    </div>
                </div>

                <h2>üß™ Generaci√≥n de Tests Automatizados</h2>

                <p>Claude Code puede generar suites de tests completas bas√°ndose en tu c√≥digo de producci√≥n.</p>

                <h3>Tests Unitarios Completos</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Generar tests unitarios para un m√≥dulo
claude "Crea tests unitarios completos para src/services/order-service.ts usando Jest. Incluye:
- Happy paths (casos exitosos)
- Edge cases (casos l√≠mite)
- Error handling (manejo de errores)
- Mocks para dependencias externas (database, APIs)
- 100% code coverage"</code></pre>
                </div>

                <h3>Tests de Integraci√≥n</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Tests de integraci√≥n para API
claude "Crea tests de integraci√≥n para la API de pedidos usando Supertest:
- Test completo del flujo: crear pedido ‚Üí pagar ‚Üí confirmar ‚Üí enviar
- Validaci√≥n de respuestas HTTP
- Verificaci√≥n de side effects (emails, webhooks, DB updates)
- Rollback en caso de errores
- Tests de concurrencia y race conditions"</code></pre>
                </div>

                <h3>Tests End-to-End con Playwright</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Instalar Playwright
brew install playwright
npm install -D @playwright/test

# Generar E2E tests
claude "Crea tests E2E con Playwright para el flujo de compra:
1. Usuario navega al cat√°logo
2. Busca producto 'MacBook Pro'
3. Agrega al carrito
4. Procede al checkout
5. Completa formulario de pago
6. Verifica confirmaci√≥n de orden
7. Toma screenshots en cada paso
8. Incluye assertions detalladas"</code></pre>
                </div>

                <h3>Property-Based Testing</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Tests basados en propiedades con fast-check
npm install -D fast-check

# Generar property-based tests
claude "Crea property-based tests para la funci√≥n calculateTax usando fast-check:
- Propiedad: tax nunca debe ser negativo
- Propiedad: tax debe ser proporcional al amount
- Propiedad: calculateTax debe ser idempotente
- Propiedad: rate de 0% debe resultar en tax de 0
- Genera 1000 casos aleatorios autom√°ticamente"</code></pre>
                </div>

                <h2>üìö Documentaci√≥n Autom√°tica</h2>

                <p>Genera y mant√©n documentaci√≥n actualizada autom√°ticamente con Claude Code.</p>

                <h3>JSDoc / TSDoc Completo</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Documentar m√≥dulo completo
claude "Agrega JSDoc completo a src/utils/validators.ts:
- Descripci√≥n de cada funci√≥n
- @param con tipos y descripciones
- @returns con tipo y descripci√≥n
- @throws para errores posibles
- @example con casos de uso reales
- @see links a documentaci√≥n relacionada"</code></pre>
                </div>

                <h3>README.md Profesional</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Generar README completo
claude "Genera un README.md profesional para este proyecto analizando el c√≥digo:
- Descripci√≥n del proyecto y prop√≥sito
- Badges (build status, coverage, versi√≥n)
- Requisitos del sistema (espec√≠fico para macOS)
- Instalaci√≥n paso a paso
- Configuraci√≥n con ejemplos
- Uso con ejemplos de c√≥digo
- API Reference
- Arquitectura del proyecto
- Scripts disponibles
- Contributing guidelines
- Licencia"</code></pre>
                </div>

                <h3>Generaci√≥n de API Docs con TypeDoc</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Instalar TypeDoc
npm install -D typedoc

# Configurar TypeDoc
claude "Crea configuraci√≥n de TypeDoc (typedoc.json) para generar documentaci√≥n HTML profesional. Incluye:
- Tema moderno
- Navegaci√≥n lateral
- Search functionality
- Exportar a m√∫ltiples formatos
- Integraci√≥n con GitHub Pages"

# Generar documentaci√≥n
npx typedoc --out docs src/index.ts

# Servir localmente
python3 -m http.server 8080 --directory docs</code></pre>
                </div>

                <h3>Documentaci√≥n Interactiva con Swagger/OpenAPI</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Generar especificaci√≥n OpenAPI
claude "Genera especificaci√≥n OpenAPI 3.1 completa para nuestra REST API:
- Todos los endpoints con descripciones
- Request/response schemas con ejemplos
- Autenticaci√≥n (JWT)
- Error responses con c√≥digos HTTP
- Rate limiting headers
- Exportar a openapi.yaml"

# Visualizar con Swagger UI
npx swagger-ui-watcher openapi.yaml</code></pre>
                </div>

                <h2>üêõ Debugging Asistido por IA</h2>

                <p>Usa Claude Code para debugging avanzado de problemas complejos.</p>

                <h3>An√°lisis de Stack Traces</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Analizar error complejo
claude "Analiza este stack trace y encuentra la causa ra√≠z:

Error: ECONNREFUSED connect ECONNREFUSED 127.0.0.1:5432
    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1144:16)
    at Protocol._enqueue (/node_modules/mysql/lib/protocol/Protocol.js:144:48)
    at Protocol.handshake (/node_modules/mysql/lib/protocol/Protocol.js:51:23)

Contexto: Esto ocurre solo en producci√≥n macOS, funciona en desarrollo.
Archivos relevantes: database.ts, config/production.ts"</code></pre>
                </div>

                <h3>Debugging de Memory Leaks</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Analizar memory leak
node --inspect server.js

# En otra terminal
claude "Analiza este heap snapshot y encuentra memory leaks. El servidor usa 2GB de RAM despu√©s de 24 horas, deber√≠a usar 200MB. Heap snapshot: heap-snapshot.heapsnapshot"

# Claude identifica listeners no removidos, closures reteniendo referencias, caches sin l√≠mites, etc.</code></pre>
                </div>

                <h3>Race Conditions y Concurrencia</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Debug de race condition
claude "Este c√≥digo tiene una race condition intermitente:

async function processOrder(orderId) {
  const order = await db.orders.findOne(orderId);
  const inventory = await db.inventory.findOne(order.productId);

  if (inventory.quantity >= order.quantity) {
    inventory.quantity -= order.quantity;
    await db.inventory.update(inventory);
    await db.orders.update({...order, status: 'confirmed'});
  }
}

A veces 2 √≥rdenes procesan el mismo stock. Identifica el problema y prop√≥n soluci√≥n con locks/transactions."</code></pre>
                </div>

                <h3>Performance Profiling</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Profile de performance
node --prof server.js
# Generar carga
ab -n 10000 -c 100 http://localhost:3000/api/orders

# Procesar profile
node --prof-process isolate-0x*.log > profile.txt

# Analizar con Claude
claude "Analiza este performance profile y encuentra los bottlenecks:
$(cat profile.txt)

Enf√≥cate en:
- Funciones que consumen m√°s CPU
- Operaciones bloqueantes
- Optimizaciones de bajo esfuerzo y alto impacto"</code></pre>
                </div>

                <h2>üîÑ Migraci√≥n Entre Frameworks</h2>

                <p>Claude Code facilita migraciones complejas entre tecnolog√≠as.</p>

                <h3>React Class Components ‚Üí React Hooks</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Migrar componente a Hooks
claude "Migra este componente de clase a functional component con Hooks:
- Convierte state a useState
- Convierte lifecycle methods a useEffect
- Extrae l√≥gica a custom hooks
- Mant√©n exactamente la misma funcionalidad
- Agrega tests para verificar equivalencia

Archivo: src/components/UserProfile.tsx"</code></pre>
                </div>

                <h3>Express ‚Üí Fastify</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Migrar API de Express a Fastify
claude "Migra nuestra API de Express a Fastify:
1. Convierte route handlers a formato Fastify
2. Migra middleware a Fastify plugins
3. Usa Fastify schema validation en lugar de express-validator
4. Implementa Fastify hooks
5. Mant√©n compatibilidad con clientes existentes
6. Documenta mejoras de performance

Directorio: src/routes/"</code></pre>
                </div>

                <h3>JavaScript ‚Üí Rust (Para Performance Cr√≠tico)</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Migrar algoritmo cr√≠tico a Rust
claude "Convierte este algoritmo de procesamiento de im√°genes de Node.js a Rust con WASM:
1. Reimplementa la l√≥gica en Rust idiom√°tico
2. Usa wasm-pack para compilar a WebAssembly
3. Crea bindings de JavaScript
4. Benchmark comparativo
5. Documentaci√≥n de integraci√≥n

Objetivo: 10x mejora de performance en procesamiento de im√°genes grandes"</code></pre>
                </div>

                <h3>REST API ‚Üí GraphQL</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Migrar a GraphQL
claude "Migra nuestra REST API a GraphQL usando Apollo Server:
1. Genera schema GraphQL basado en nuestros endpoints REST
2. Implementa resolvers para cada query/mutation
3. Agrega DataLoader para evitar N+1 queries
4. Implementa subscriptions para datos real-time
5. Mant√©n REST API activa durante transici√≥n (6 meses)
6. Crea migration guide para clientes

Directorio: src/api/"</code></pre>
                </div>

                <h2>üöÄ Integraci√≥n con CI/CD en macOS</h2>

                <p>Automatiza tu pipeline de desarrollo con Claude Code.</p>

                <h3>GitHub Actions para macOS</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Generar workflow de CI/CD
claude "Crea GitHub Actions workflow para proyecto Node.js en macOS:

1. Triggers: push a main, PRs
2. Jobs:
   - Lint (ESLint + Prettier)
   - Type check (TypeScript)
   - Tests (Jest con coverage)
   - Build
   - Security scan (npm audit, Snyk)
   - Deploy a staging (si es main branch)

3. Optimizaciones:
   - Cache de node_modules
   - Matrix testing (Node 18, 20, 22)
   - Parallel jobs
   - Fail fast en errores cr√≠ticos

Archivo: .github/workflows/ci.yml"</code></pre>
                </div>

                <h3>Pre-deployment Checks</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Script de pre-deployment
claude "Crea script de pre-deployment checks para macOS:

#!/bin/zsh
# pre-deploy.sh

Verificaciones:
1. Tests passing (100% required)
2. Build exitoso
3. No secrets en c√≥digo (scan con trufflehog)
4. Dependencias actualizadas (no vulnerabilidades cr√≠ticas)
5. Database migrations ready
6. Environment variables configuradas
7. Rollback plan documentado
8. Health check endpoints funcionando

Fallar si alguna verificaci√≥n falla."</code></pre>
                </div>

                <h3>Automatizaci√≥n de Releases</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Automated semantic versioning
npm install -D semantic-release

# Configurar semantic-release
claude "Configura semantic-release para nuestro proyecto:
1. Analiza commits (Conventional Commits)
2. Determina versi√≥n autom√°ticamente (major/minor/patch)
3. Genera CHANGELOG.md
4. Crea Git tag
5. Publica a npm (si es librer√≠a)
6. Crea GitHub Release con notas
7. Notifica a Slack

Archivo: .releaserc.json"</code></pre>
                </div>

                <h2>ü§ñ Creaci√≥n de CLIs Interactivas</h2>

                <div class="code-block">
                    <pre><code class="language-bash"># Generar CLI profesional
npm install commander inquirer chalk ora

claude "Crea una CLI interactiva para scaffolding de proyectos:

Comandos:
- create <project-name>: Wizard interactivo
- add <component>: Agregar componentes
- deploy: Deploy asistido

Features:
- Prompts interactivos con inquirer
- Progress spinners con ora
- Output coloreado con chalk
- Validaci√≥n de inputs
- Templates personalizables
- Config persistence

Archivo: src/cli.ts"</code></pre>
                </div>

                <h2>üîê Security Auditing Automatizado</h2>

                <div class="code-block">
                    <pre><code class="language-bash"># Audit completo de seguridad
claude "Realiza audit de seguridad completo del proyecto:

1. An√°lisis de dependencias (npm audit, Snyk)
2. Scan de c√≥digo est√°tico (SAST)
3. Detecci√≥n de secrets hardcodeados
4. An√°lisis de permisos de archivos
5. Review de configuraciones (CORS, CSP, Headers)
6. Check de autenticaci√≥n/autorizaci√≥n
7. Validaci√≥n de inputs
8. Rate limiting
9. Reporte detallado con prioridades

Genera: security-report.md con findings y remediation steps"</code></pre>
                </div>

                <h2>üìä Casos de Uso por Industria</h2>

                <table>
                    <thead>
                        <tr>
                            <th>Industria</th>
                            <th>Caso de Uso</th>
                            <th>Beneficio</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>FinTech</strong></td>
                            <td>Migraci√≥n de sistema de pagos legacy a arquitectura de microservicios</td>
                            <td>Reducci√≥n de 80% en tiempo de migraci√≥n</td>
                        </tr>
                        <tr>
                            <td><strong>E-commerce</strong></td>
                            <td>Generaci√≥n autom√°tica de tests E2E para flujos de compra</td>
                            <td>95% reducci√≥n en bugs de producci√≥n</td>
                        </tr>
                        <tr>
                            <td><strong>SaaS</strong></td>
                            <td>Refactorizaci√≥n de monolito a microservicios con documentaci√≥n completa</td>
                            <td>6 meses ‚Üí 6 semanas de migraci√≥n</td>
                        </tr>
                        <tr>
                            <td><strong>Healthcare</strong></td>
                            <td>Audit de seguridad y compliance (HIPAA)</td>
                            <td>100% compliance automatizado</td>
                        </tr>
                        <tr>
                            <td><strong>EdTech</strong></td>
                            <td>Migraci√≥n de Angular a React con preservaci√≥n de funcionalidad</td>
                            <td>Zero downtime durante migraci√≥n</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert success">
                    <div class="alert-icon">üéØ</div>
                    <div class="alert-content">
                        <h4>ROI Comprobado</h4>
                        <p>Empresas reportan ROI de 300-500% en el primer a√±o al usar Claude Code para casos de uso avanzados, principalmente por reducci√≥n de tiempo en refactorizaci√≥n, testing y documentaci√≥n.</p>
                    </div>
                </div>

                <h2>üí° Tips Avanzados</h2>

                <ul>
                    <li><strong>Contextualiza Siempre:</strong> Proporciona a Claude informaci√≥n sobre tu stack, convenciones, y restricciones del proyecto</li>
                    <li><strong>Iteraci√≥n Incremental:</strong> Para refactorizaciones grandes, trabaja m√≥dulo por m√≥dulo manteniendo tests pasando</li>
                    <li><strong>Valida Resultados:</strong> Siempre ejecuta tests, linters, y type checkers despu√©s de cambios generados por IA</li>
                    <li><strong>Documenta Decisiones:</strong> Pide a Claude que documente el "por qu√©" de las decisiones t√©cnicas tomadas</li>
                    <li><strong>Code Review Humano:</strong> La IA acelera el desarrollo, pero code review humano sigue siendo esencial</li>
                </ul>

                <nav class="navigation">
                    <a href="06-mejores-practicas.html" class="nav-btn">‚Üê Anterior</a>
                    <a href="08-troubleshooting.html" class="nav-btn">Siguiente ‚Üí</a>
                </nav>
            </div>
        </div>
    </main>

    <footer>
        <div class="container footer-content">
            <p>&copy; 2025 Claude Code Documentation. Creado con Claude Code.</p>
            <div class="footer-links">
                <a href="https://www.anthropic.com" target="_blank">Anthropic</a>
                <a href="https://docs.anthropic.com" target="_blank">Documentaci√≥n Oficial</a>
                <a href="https://github.com/anthropics/claude-code" target="_blank">GitHub</a>
            </div>
        </div>
    </footer>

    <script src="assets/js/navigation.js"></script>
    <script src="assets/js/code-copy.js"></script>
</body>
</html>