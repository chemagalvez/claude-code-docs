<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Model Context Protocol (MCP) en Claude Code - Servidores, arquitectura y desarrollo personalizado">
    <title>5. Model Context Protocol | Claude Code para macOS</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tokyo-night-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ñ</text></svg>">
</head>
<body>
    <header>
        <div class="container header-content">
            <a href="index.html" class="logo">
                <div class="logo-icon">ü§ñ</div>
                <span>Claude Code Docs</span>
            </a>
            <div class="nav-controls">
                <select id="page-selector" class="page-selector"></select>
                <button id="theme-toggle" class="theme-toggle" aria-label="Cambiar tema">üåô</button>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="progress-indicator">
                <span id="progress-indicator">P√°gina 6 de 9</span>
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width: 66.66%"></div>
                </div>
            </div>

            <div class="content-wrapper">
                <h1>Model Context Protocol (MCP)</h1>

                <p>
                    El <strong>Model Context Protocol (MCP)</strong> es un protocolo abierto desarrollado por Anthropic que permite
                    extender las capacidades de Claude Code mediante servidores externos. MCP transforma Claude Code de una simple
                    herramienta CLI en una plataforma extensible que puede integrarse con bases de datos, APIs, sistemas de archivos
                    y pr√°cticamente cualquier fuente de datos.
                </p>

                <div class="alert info">
                    <div class="alert-icon">‚ÑπÔ∏è</div>
                    <div class="alert-content">
                        <h4>¬øPor qu√© es revolucionario MCP?</h4>
                        <p>MCP estandariza c√≥mo las aplicaciones de IA acceden a contexto externo. En lugar de que cada herramienta
                        implemente sus propias integraciones, MCP proporciona un protocolo universal que cualquier servicio puede
                        implementar.</p>
                    </div>
                </div>

                <h2>¬øQu√© es Model Context Protocol?</h2>

                <p>
                    MCP es un protocolo cliente-servidor que permite a Claude Code:
                </p>

                <ul>
                    <li><strong>Acceder a datos externos:</strong> Bases de datos, APIs, servicios en la nube</li>
                    <li><strong>Ejecutar acciones:</strong> Operaciones en sistemas externos (crear tickets, enviar emails, etc.)</li>
                    <li><strong>Leer recursos:</strong> Archivos, documentos, configuraciones de sistemas remotos</li>
                    <li><strong>Mantener contexto:</strong> Informaci√≥n persistente entre sesiones</li>
                    <li><strong>Extender capacidades:</strong> Funcionalidad personalizada sin modificar Claude Code</li>
                </ul>

                <h3>Componentes de MCP</h3>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üñ•Ô∏è</div>
                        <h3>Cliente MCP</h3>
                        <p>Claude Code act√∫a como cliente MCP, conect√°ndose a servidores y consumiendo sus recursos.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">‚öôÔ∏è</div>
                        <h3>Servidor MCP</h3>
                        <p>Procesos independientes que exponen recursos, herramientas y prompts a trav√©s del protocolo.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üîå</div>
                        <h3>Transporte</h3>
                        <p>Capa de comunicaci√≥n (stdio, HTTP, WebSocket) que conecta cliente y servidor.</p>
                    </div>
                </div>

                <h2>Protocolos de Transporte en MCP</h2>

                <p>
                    MCP soporta m√∫ltiples protocolos de transporte, cada uno optimizado para diferentes casos de uso.
                    Es importante entender las diferencias y las evoluciones recientes del protocolo.
                </p>

                <h3>Transportes Disponibles</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Transporte</th>
                            <th>Estado</th>
                            <th>Mejor Para</th>
                            <th>Limitaciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>stdio</strong></td>
                            <td>‚úÖ Activo</td>
                            <td>Servidores locales, desarrollo</td>
                            <td>Solo procesos locales</td>
                        </tr>
                        <tr>
                            <td><strong>HTTP (Streamable)</strong></td>
                            <td>‚úÖ Recomendado</td>
                            <td>Servicios remotos, producci√≥n</td>
                            <td>Requiere servidor web</td>
                        </tr>
                        <tr>
                            <td><strong>WebSocket</strong></td>
                            <td>‚úÖ Activo</td>
                            <td>Comunicaci√≥n bidireccional en tiempo real</td>
                            <td>M√°s complejo de configurar</td>
                        </tr>
                        <tr>
                            <td><strong>SSE (Server-Sent Events)</strong></td>
                            <td>‚ö†Ô∏è Deprecado</td>
                            <td>N/A (usar HTTP Streamable)</td>
                            <td>Unidireccional, limitaciones de navegador</td>
                        </tr>
                    </tbody>
                </table>

                <h3>1. stdio - Standard Input/Output</h3>

                <p>
                    El transporte m√°s simple y com√∫n para servidores MCP locales. Usa stdin/stdout para comunicaci√≥n.
                </p>

                <div class="code-block">
                    <pre><code class="language-typescript">// Servidor MCP con stdio
import { StdioServerTransport } from '@modelcontextprotocol/sdk/server/stdio.js';

const transport = new StdioServerTransport();
await server.connect(transport);
console.error('Servidor MCP iniciado en stdio');
// Nota: console.error se usa para logging porque stdout es para comunicaci√≥n MCP</code></pre>
                </div>

                <div class="code-block">
                    <pre><code class="language-json">// Configuraci√≥n en ~/.config/claude/mcp.json
{
  "mcpServers": {
    "mi-servidor": {
      "command": "node",
      "args": ["./dist/server.js"],
      "env": {}
    }
  }
}</code></pre>
                </div>

                <div class="alert info">
                    <div class="alert-icon">üí°</div>
                    <div class="alert-content">
                        <h4>Ventajas de stdio</h4>
                        <ul>
                            <li>Simple de implementar y debuggear</li>
                            <li>No requiere configuraci√≥n de red</li>
                            <li>Perfecto para herramientas CLI y scripts locales</li>
                            <li>Menor latencia al no usar red</li>
                        </ul>
                    </div>
                </div>

                <h3>2. HTTP Streamable (Recomendado para Producci√≥n)</h3>

                <p>
                    El protocolo HTTP con streaming reemplaza a SSE como la opci√≥n recomendada para servicios remotos.
                    Ofrece mejor rendimiento, control y compatibilidad.
                </p>

                <div class="code-block">
                    <pre><code class="language-typescript">// Servidor MCP con HTTP Streamable
import { Server } from '@modelcontextprotocol/sdk/server/index.js';
import express from 'express';

const app = express();
const mcpServer = new Server({
  name: 'my-http-server',
  version: '1.0.0',
});

app.post('/mcp', async (req, res) => {
  // Configurar headers para streaming
  res.setHeader('Content-Type', 'application/json');
  res.setHeader('Transfer-Encoding', 'chunked');
  res.setHeader('Cache-Control', 'no-cache');

  // Procesar request MCP y streamear respuesta
  const result = await mcpServer.handleRequest(req.body);

  // Enviar chunks de respuesta
  res.write(JSON.stringify(result.chunk1));
  res.write(JSON.stringify(result.chunk2));
  res.end();
});

app.listen(3000, () => {
  console.log('MCP Server HTTP escuchando en puerto 3000');
});</code></pre>
                </div>

                <div class="code-block">
                    <pre><code class="language-json">// Configuraci√≥n de cliente HTTP
{
  "mcpServers": {
    "remote-server": {
      "transport": "http",
      "url": "https://api.example.com/mcp",
      "headers": {
        "Authorization": "Bearer ${API_TOKEN}"
      }
    }
  }
}</code></pre>
                </div>

                <h3>3. WebSocket - Comunicaci√≥n Bidireccional</h3>

                <p>
                    WebSocket permite comunicaci√≥n bidireccional en tiempo real. Ideal para notificaciones push y
                    actualizaciones en vivo.
                </p>

                <div class="code-block">
                    <pre><code class="language-typescript">// Servidor MCP con WebSocket
import { Server } from '@modelcontextprotocol/sdk/server/index.js';
import { WebSocketServer } from 'ws';

const wss = new WebSocketServer({ port: 8080 });
const mcpServer = new Server({
  name: 'websocket-mcp-server',
  version: '1.0.0',
});

wss.on('connection', (ws) => {
  console.log('Cliente MCP conectado via WebSocket');

  ws.on('message', async (data) => {
    const request = JSON.parse(data.toString());
    const response = await mcpServer.handleRequest(request);
    ws.send(JSON.stringify(response));
  });

  ws.on('close', () => {
    console.log('Cliente MCP desconectado');
  });
});</code></pre>
                </div>

                <h3>4. SSE (Server-Sent Events) - ‚ö†Ô∏è DEPRECADO</h3>

                <div class="alert warning">
                    <div class="alert-icon">‚ö†Ô∏è</div>
                    <div class="alert-content">
                        <h4>SSE est√° siendo deprecado en MCP</h4>
                        <p>
                            A partir de 2024-2025, SSE est√° siendo reemplazado por <strong>HTTP Streamable</strong>
                            en el protocolo MCP. Si est√°s usando SSE, migra a HTTP Streamable lo antes posible.
                        </p>
                    </div>
                </div>

                <h4>¬øPor qu√© se depreca SSE?</h4>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üîÑ</div>
                        <h3>Comunicaci√≥n Unidireccional</h3>
                        <p>SSE solo permite enviar datos del servidor al cliente. Para requests bidireccionales, necesitas HTTP separado.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üåê</div>
                        <h3>Limitaciones del Navegador</h3>
                        <p>L√≠mite de 6 conexiones SSE simult√°neas por dominio en navegadores. No es problema en CLI, pero limita uso web.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üîß</div>
                        <h3>Menos Control</h3>
                        <p>HTTP Streamable ofrece m√°s control sobre headers, chunking, y manejo de errores.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">‚ö°</div>
                        <h3>Rendimiento</h3>
                        <p>HTTP Streamable con HTTP/2 y HTTP/3 ofrece mejor rendimiento y multiplexing.</p>
                    </div>
                </div>

                <h4>Migraci√≥n de SSE a HTTP Streamable</h4>

                <p>Si tienes un servidor MCP usando SSE, sigue estos pasos para migrar:</p>

                <div class="code-block">
                    <pre><code class="language-typescript">// ANTES: Servidor SSE (deprecado)
import { SSEServerTransport } from '@modelcontextprotocol/sdk/server/sse.js';

const transport = new SSEServerTransport('/events', response);
await server.connect(transport);

// DESPU√âS: HTTP Streamable (recomendado)
import express from 'express';

const app = express();

app.post('/mcp', express.json(), async (req, res) => {
  // Configurar streaming HTTP
  res.setHeader('Content-Type', 'application/json');
  res.setHeader('Transfer-Encoding', 'chunked');

  try {
    const request = req.body;

    // Procesar request MCP
    const result = await mcpServer.handleRequest(request);

    // Streamear respuesta en chunks
    if (result.stream) {
      for await (const chunk of result.stream) {
        res.write(JSON.stringify(chunk) + '\n');
      }
    } else {
      res.write(JSON.stringify(result));
    }

    res.end();
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

app.listen(3000);</code></pre>
                </div>

                <h4>Comparaci√≥n T√©cnica: SSE vs HTTP Streamable</h4>

                <table>
                    <thead>
                        <tr>
                            <th>Caracter√≠stica</th>
                            <th>SSE (Deprecado)</th>
                            <th>HTTP Streamable (Nuevo)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Direcci√≥n</strong></td>
                            <td>Unidireccional (server ‚Üí client)</td>
                            <td>Bidireccional completo</td>
                        </tr>
                        <tr>
                            <td><strong>Formato</strong></td>
                            <td>Solo texto (text/event-stream)</td>
                            <td>Cualquier content-type</td>
                        </tr>
                        <tr>
                            <td><strong>Reconexi√≥n</strong></td>
                            <td>Autom√°tica con EventSource API</td>
                            <td>Manual, m√°s control</td>
                        </tr>
                        <tr>
                            <td><strong>HTTP/2 Multiplexing</strong></td>
                            <td>Limitado</td>
                            <td>Soporte completo</td>
                        </tr>
                        <tr>
                            <td><strong>Custom Headers</strong></td>
                            <td>Limitado</td>
                            <td>Control completo</td>
                        </tr>
                        <tr>
                            <td><strong>L√≠mites de Conexi√≥n</strong></td>
                            <td>6 por dominio (navegador)</td>
                            <td>Sin l√≠mites artificiales</td>
                        </tr>
                        <tr>
                            <td><strong>Manejo de Errores</strong></td>
                            <td>B√°sico</td>
                            <td>Robusto y granular</td>
                        </tr>
                        <tr>
                            <td><strong>Compresi√≥n</strong></td>
                            <td>Limitada</td>
                            <td>gzip, brotli completo</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Timeline de Deprecaci√≥n SSE</h4>

                <div class="alert info">
                    <div class="alert-icon">üìÖ</div>
                    <div class="alert-content">
                        <h4>Calendario de Deprecaci√≥n</h4>
                        <ul>
                            <li><strong>Q4 2024:</strong> SSE marcado como deprecado en la documentaci√≥n</li>
                            <li><strong>Q1 2025:</strong> Warnings en SDK al usar SSE</li>
                            <li><strong>Q2 2025:</strong> HTTP Streamable se convierte en el est√°ndar recomendado</li>
                            <li><strong>Q4 2025:</strong> Posible remoci√≥n de SSE de la especificaci√≥n MCP</li>
                        </ul>
                        <p><strong>Acci√≥n recomendada:</strong> Migra a HTTP Streamable antes de Q2 2025.</p>
                    </div>
                </div>

                <h3>Elegir el Transporte Correcto</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Regla general para elegir transporte:

# 1. Servidor local, desarrollo, scripts CLI
# ‚Üí stdio (m√°s simple)

# 2. Servicio remoto, producci√≥n, escalabilidad
# ‚Üí HTTP Streamable (mejor rendimiento y control)

# 3. Necesitas notificaciones push bidireccionales en tiempo real
# ‚Üí WebSocket (full-duplex)

# 4. Est√°s usando SSE actualmente
# ‚Üí Migra a HTTP Streamable AHORA</code></pre>
                </div>

                <h2>Arquitectura del MCP</h2>

                <p>
                    Entender la arquitectura de MCP te ayudar√° a aprovechar todo su potencial:
                </p>

                <div class="code-block">
                    <pre><code class="language-plaintext">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Claude Code (Cliente MCP)        ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ   Context Manager                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ   - Recursos                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ   - Herramientas                   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ   - Prompts                        ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ MCP Protocol
                  ‚îÇ (JSON-RPC)
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                   ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ MCP Server  ‚îÇ    ‚îÇ MCP Server   ‚îÇ
‚îÇ (Database)  ‚îÇ    ‚îÇ (File Sys)   ‚îÇ
‚îÇ             ‚îÇ    ‚îÇ              ‚îÇ
‚îÇ Resources:  ‚îÇ    ‚îÇ Resources:   ‚îÇ
‚îÇ - Tables    ‚îÇ    ‚îÇ - Files      ‚îÇ
‚îÇ - Queries   ‚îÇ    ‚îÇ - Dirs       ‚îÇ
‚îÇ             ‚îÇ    ‚îÇ              ‚îÇ
‚îÇ Tools:      ‚îÇ    ‚îÇ Tools:       ‚îÇ
‚îÇ - query()   ‚îÇ    ‚îÇ - read()     ‚îÇ
‚îÇ - update()  ‚îÇ    ‚îÇ - write()    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre>
                </div>

                <h3>Conceptos Clave</h3>

                <h4>1. Recursos (Resources)</h4>
                <p>
                    Unidades de datos que un servidor MCP puede proporcionar. Ejemplos:
                </p>
                <ul>
                    <li>Filas de una base de datos</li>
                    <li>Archivos de un sistema de archivos</li>
                    <li>Documentos de una API</li>
                    <li>Configuraciones de un servicio</li>
                </ul>

                <h4>2. Herramientas (Tools)</h4>
                <p>
                    Funciones que Claude puede invocar a trav√©s del servidor MCP:
                </p>
                <ul>
                    <li>Ejecutar queries SQL</li>
                    <li>Crear tickets en Jira</li>
                    <li>Enviar webhooks</li>
                    <li>Modificar archivos remotos</li>
                </ul>

                <h4>3. Prompts</h4>
                <p>
                    Templates de prompts predefinidos que el servidor puede ofrecer:
                </p>
                <ul>
                    <li>Plantillas para an√°lisis de datos</li>
                    <li>Prompts espec√≠ficos del dominio</li>
                    <li>Workflows predefinidos</li>
                </ul>

                <h2>Servidores MCP Disponibles</h2>

                <p>
                    La comunidad y Anthropic han desarrollado numerosos servidores MCP listos para usar:
                </p>

                <h3>Servidores Oficiales de Anthropic</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Servidor</th>
                            <th>Descripci√≥n</th>
                            <th>Instalaci√≥n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>@modelcontextprotocol/server-filesystem</strong></td>
                            <td>Acceso a sistema de archivos local</td>
                            <td><code>npm install -g @modelcontextprotocol/server-filesystem</code></td>
                        </tr>
                        <tr>
                            <td><strong>@modelcontextprotocol/server-postgres</strong></td>
                            <td>Integraci√≥n con PostgreSQL</td>
                            <td><code>npm install -g @modelcontextprotocol/server-postgres</code></td>
                        </tr>
                        <tr>
                            <td><strong>@modelcontextprotocol/server-github</strong></td>
                            <td>Integraci√≥n con GitHub API</td>
                            <td><code>npm install -g @modelcontextprotocol/server-github</code></td>
                        </tr>
                        <tr>
                            <td><strong>@modelcontextprotocol/server-slack</strong></td>
                            <td>Integraci√≥n con Slack</td>
                            <td><code>npm install -g @modelcontextprotocol/server-slack</code></td>
                        </tr>
                    </tbody>
                </table>

                <h3>Servidores de la Comunidad</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Servidor</th>
                            <th>Descripci√≥n</th>
                            <th>Casos de Uso</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>mcp-server-sqlite</strong></td>
                            <td>Acceso a bases de datos SQLite</td>
                            <td>Proyectos locales, desarrollo</td>
                        </tr>
                        <tr>
                            <td><strong>mcp-server-notion</strong></td>
                            <td>Integraci√≥n con Notion</td>
                            <td>Documentaci√≥n, wikis</td>
                        </tr>
                        <tr>
                            <td><strong>mcp-server-google-drive</strong></td>
                            <td>Acceso a Google Drive</td>
                            <td>Archivos en la nube</td>
                        </tr>
                        <tr>
                            <td><strong>mcp-server-jira</strong></td>
                            <td>Gesti√≥n de tickets Jira</td>
                            <td>Project management</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert tip">
                    <div class="alert-icon">üí°</div>
                    <div class="alert-content">
                        <h4>Directorio de Servidores MCP</h4>
                        <p>Puedes explorar m√°s servidores en el directorio oficial: <a href="https://github.com/modelcontextprotocol/servers" target="_blank">github.com/modelcontextprotocol/servers</a></p>
                    </div>
                </div>

                <h2>Configuraci√≥n en macOS</h2>

                <p>
                    Configurar servidores MCP en macOS es sencillo. Aqu√≠ te mostramos el proceso completo:
                </p>

                <h3>1. Instalar un Servidor MCP</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Ejemplo: Instalar servidor de filesystem
npm install -g @modelcontextprotocol/server-filesystem

# Verificar instalaci√≥n
which mcp-server-filesystem</code></pre>
                </div>

                <h3>2. Configurar Claude Code</h3>

                <p>
                    Edita el archivo de configuraci√≥n de Claude Code en <code>~/.config/claude/mcp.json</code>:
                </p>

                <div class="code-block">
                    <pre><code class="language-bash"># Crear archivo de configuraci√≥n MCP si no existe
mkdir -p ~/.config/claude
nano ~/.config/claude/mcp.json</code></pre>
                </div>

                <h3>3. Configuraci√≥n de Servidores</h3>

                <div class="code-block">
                    <pre><code class="language-json">{
  "mcpServers": {
    "filesystem": {
      "command": "mcp-server-filesystem",
      "args": ["/Users/tu-usuario/proyectos"],
      "env": {}
    },
    "postgres": {
      "command": "mcp-server-postgres",
      "args": [],
      "env": {
        "POSTGRES_URL": "postgresql://user:pass@localhost:5432/mydb"
      }
    },
    "github": {
      "command": "mcp-server-github",
      "args": [],
      "env": {
        "GITHUB_TOKEN": "ghp_tu_token_aqui"
      }
    }
  }
}</code></pre>
                </div>

                <div class="alert warning">
                    <div class="alert-icon">‚ö†Ô∏è</div>
                    <div class="alert-content">
                        <h4>Seguridad en Configuraci√≥n</h4>
                        <p>Nunca incluyas credenciales directamente en el archivo de configuraci√≥n. Usa variables de entorno
                        referenciadas desde <code>~/.zshrc</code> o un archivo <code>.env</code> seguro.</p>
                    </div>
                </div>

                <h3>4. Uso de Variables de Entorno (Recomendado)</h3>

                <div class="code-block">
                    <pre><code class="language-zsh"># Agregar a ~/.zshrc
export GITHUB_TOKEN="ghp_tu_token_aqui"
export POSTGRES_URL="postgresql://user:pass@localhost:5432/mydb"
export SLACK_TOKEN="xoxb-tu-token-slack"

# Recargar configuraci√≥n
source ~/.zshrc</code></pre>
                </div>

                <div class="code-block">
                    <pre><code class="language-json">{
  "mcpServers": {
    "github": {
      "command": "mcp-server-github",
      "env": {
        "GITHUB_TOKEN": "${GITHUB_TOKEN}"
      }
    }
  }
}</code></pre>
                </div>

                <h2>Usar Servidores MCP</h2>

                <p>
                    Una vez configurados, puedes usar los servidores MCP de forma transparente en tus conversaciones:
                </p>

                <h3>Ejemplo 1: Filesystem</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Claude Code autom√°ticamente detecta el servidor filesystem
claude

# En la conversaci√≥n:
# "Lista todos los archivos TypeScript en mi proyecto"
# Claude usar√° el servidor MCP para acceder al filesystem</code></pre>
                </div>

                <h3>Ejemplo 2: Base de Datos PostgreSQL</h3>

                <div class="code-block">
                    <pre><code class="language-bash">claude

# En la conversaci√≥n:
# "Mu√©strame el esquema de la tabla users"
# "Genera una query para obtener usuarios activos del √∫ltimo mes"
# Claude ejecutar√° queries a trav√©s del servidor MCP</code></pre>
                </div>

                <h3>Ejemplo 3: GitHub</h3>

                <div class="code-block">
                    <pre><code class="language-bash">claude

# En la conversaci√≥n:
# "Crea un issue en mi repositorio principal sobre el bug de autenticaci√≥n"
# "Lista los √∫ltimos 5 PRs merged"
# Claude interactuar√° con GitHub a trav√©s del servidor MCP</code></pre>
                </div>

                <h2>Crear Servidor MCP Personalizado</h2>

                <p>
                    Crear tu propio servidor MCP te permite integrar cualquier servicio o fuente de datos con Claude Code.
                </p>

                <h3>Ejemplo: Servidor MCP Simple en TypeScript</h3>

                <h4>1. Configurar el Proyecto</h4>

                <div class="code-block">
                    <pre><code class="language-bash"># Crear directorio del proyecto
mkdir mi-servidor-mcp
cd mi-servidor-mcp

# Inicializar proyecto Node.js
npm init -y

# Instalar dependencias
npm install @modelcontextprotocol/sdk zod

# Instalar TypeScript
npm install -D typescript @types/node

# Crear tsconfig.json
npx tsc --init</code></pre>
                </div>

                <h4>2. Implementar el Servidor</h4>

                <div class="code-block">
                    <pre><code class="language-typescript">// src/index.ts
import { Server } from '@modelcontextprotocol/sdk/server/index.js';
import { StdioServerTransport } from '@modelcontextprotocol/sdk/server/stdio.js';
import {
  CallToolRequestSchema,
  ListToolsRequestSchema,
} from '@modelcontextprotocol/sdk/types.js';
import { z } from 'zod';

// Definir esquema de herramienta
const GetWeatherSchema = z.object({
  city: z.string(),
});

class WeatherMCPServer {
  private server: Server;

  constructor() {
    this.server = new Server(
      {
        name: 'weather-server',
        version: '1.0.0',
      },
      {
        capabilities: {
          tools: {},
        },
      }
    );

    this.setupToolHandlers();

    // Manejo de errores
    this.server.onerror = (error) => console.error('[MCP Error]', error);
    process.on('SIGINT', async () => {
      await this.server.close();
      process.exit(0);
    });
  }

  private setupToolHandlers() {
    // Listar herramientas disponibles
    this.server.setRequestHandler(ListToolsRequestSchema, async () => ({
      tools: [
        {
          name: 'get_weather',
          description: 'Obtiene el clima actual de una ciudad',
          inputSchema: {
            type: 'object',
            properties: {
              city: {
                type: 'string',
                description: 'Nombre de la ciudad',
              },
            },
            required: ['city'],
          },
        },
      ],
    }));

    // Manejar llamadas a herramientas
    this.server.setRequestHandler(CallToolRequestSchema, async (request) => {
      if (request.params.name === 'get_weather') {
        const args = GetWeatherSchema.parse(request.params.arguments);

        // Aqu√≠ har√≠as una llamada real a una API de clima
        // Por ahora, retornamos datos de ejemplo
        const weatherData = {
          city: args.city,
          temperature: 22,
          condition: 'Soleado',
          humidity: 65,
        };

        return {
          content: [
            {
              type: 'text',
              text: JSON.stringify(weatherData, null, 2),
            },
          ],
        };
      }

      throw new Error(`Herramienta desconocida: ${request.params.name}`);
    });
  }

  async run() {
    const transport = new StdioServerTransport();
    await this.server.connect(transport);
    console.error('Weather MCP Server iniciado en stdio');
  }
}

// Iniciar servidor
const server = new WeatherMCPServer();
server.run().catch(console.error);</code></pre>
                </div>

                <h4>3. Configurar Build</h4>

                <div class="code-block">
                    <pre><code class="language-json">// package.json
{
  "name": "weather-mcp-server",
  "version": "1.0.0",
  "type": "module",
  "bin": {
    "weather-mcp-server": "./build/index.js"
  },
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "prepare": "npm run build"
  },
  "dependencies": {
    "@modelcontextprotocol/sdk": "^0.5.0",
    "zod": "^3.22.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.3.0"
  }
}</code></pre>
                </div>

                <h4>4. Compilar e Instalar</h4>

                <div class="code-block">
                    <pre><code class="language-bash"># Compilar TypeScript
npm run build

# Instalar globalmente (macOS)
npm link

# Verificar instalaci√≥n
which weather-mcp-server</code></pre>
                </div>

                <h4>5. Configurar en Claude Code</h4>

                <div class="code-block">
                    <pre><code class="language-json">// ~/.config/claude/mcp.json
{
  "mcpServers": {
    "weather": {
      "command": "weather-mcp-server",
      "args": [],
      "env": {}
    }
  }
}</code></pre>
                </div>

                <h4>6. Usar el Servidor</h4>

                <div class="code-block">
                    <pre><code class="language-bash">claude

# En la conversaci√≥n:
# "¬øCu√°l es el clima en Madrid?"
# Claude usar√° autom√°ticamente tu servidor MCP personalizado</code></pre>
                </div>

                <h2>Casos de Uso de MCP</h2>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üóÑÔ∏è</div>
                        <h3>Integraci√≥n con Bases de Datos</h3>
                        <p>Ejecuta queries, analiza esquemas, genera migraciones y optimiza consultas directamente desde Claude Code.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üìÅ</div>
                        <h3>Gesti√≥n de Archivos</h3>
                        <p>Accede a sistemas de archivos locales o remotos, organiza proyectos y gestiona documentaci√≥n.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üîå</div>
                        <h3>APIs Externas</h3>
                        <p>Integra servicios externos: GitHub, Slack, Jira, Notion, Google Drive, y m√°s.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üîç</div>
                        <h3>An√°lisis de Datos</h3>
                        <p>Consulta datos en tiempo real, genera reportes y crea visualizaciones basadas en informaci√≥n externa.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">‚öôÔ∏è</div>
                        <h3>Automatizaci√≥n</h3>
                        <p>Crea workflows que integran m√∫ltiples servicios para automatizar tareas complejas.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üè¢</div>
                        <h3>Sistemas Empresariales</h3>
                        <p>Conecta con CRMs, ERPs, sistemas internos y herramientas empresariales propietarias.</p>
                    </div>
                </div>

                <h2>Mejores Pr√°cticas para MCP</h2>

                <div class="alert success">
                    <div class="alert-icon">‚úÖ</div>
                    <div class="alert-content">
                        <h4>Checklist de Seguridad y Rendimiento</h4>
                        <ul>
                            <li>‚úì Nunca incluir credenciales en archivos de configuraci√≥n</li>
                            <li>‚úì Usar variables de entorno para datos sensibles</li>
                            <li>‚úì Implementar manejo de errores robusto en servidores personalizados</li>
                            <li>‚úì Validar input con esquemas (Zod, JSON Schema)</li>
                            <li>‚úì Limitar permisos de servidores al m√≠nimo necesario</li>
                            <li>‚úì Implementar rate limiting en servidores que acceden APIs externas</li>
                            <li>‚úì Documentar herramientas y recursos claramente</li>
                            <li>‚úì Usar logging para debugging y monitoreo</li>
                        </ul>
                    </div>
                </div>

                <h3>Ejemplo de Configuraci√≥n Segura</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># 1. Crear archivo .env (fuera del repositorio)
cat > ~/.config/claude/.env << 'EOF'
GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxx
POSTGRES_URL=postgresql://user:pass@localhost:5432/db
SLACK_TOKEN=xoxb-xxxxxxxxxxxxx
EOF

# 2. Proteger archivo
chmod 600 ~/.config/claude/.env

# 3. Cargar variables en ~/.zshrc
echo 'source ~/.config/claude/.env' >> ~/.zshrc
source ~/.zshrc</code></pre>
                </div>

                <h2>Debugging de Servidores MCP</h2>

                <h3>Ver Logs de Servidores</h3>

                <div class="code-block">
                    <pre><code class="language-bash"># Habilitar modo debug en Claude Code
claude --debug

# Ver logs de servidores MCP
tail -f ~/.config/claude/logs/mcp-*.log

# Probar servidor manualmente
echo '{"jsonrpc":"2.0","id":1,"method":"tools/list"}' | weather-mcp-server</code></pre>
                </div>

                <h3>Problemas Comunes</h3>

                <h4>Problema: "MCP Server not responding"</h4>

                <div class="code-block">
                    <pre><code class="language-bash"># Verificar que el servidor est√° instalado
which mcp-server-github

# Probar ejecuci√≥n manual
mcp-server-github --version

# Verificar permisos
chmod +x $(which mcp-server-github)</code></pre>
                </div>

                <h4>Problema: "Authentication failed"</h4>

                <div class="code-block">
                    <pre><code class="language-bash"># Verificar variables de entorno
echo $GITHUB_TOKEN

# Verificar que el token tiene permisos correctos
# En GitHub: Settings ‚Üí Developer settings ‚Üí Personal access tokens</code></pre>
                </div>

                <div class="alert tip">
                    <div class="alert-icon">üí°</div>
                    <div class="alert-content">
                        <h4>Consejo Pro</h4>
                        <p>Crea un script de setup que configure autom√°ticamente todos tus servidores MCP. Esto facilita
                        la configuraci√≥n en nuevas m√°quinas y asegura consistencia en el equipo.</p>
                    </div>
                </div>

                <h2>Recursos Adicionales</h2>

                <ul>
                    <li><a href="https://modelcontextprotocol.io" target="_blank">Sitio oficial de MCP</a></li>
                    <li><a href="https://github.com/modelcontextprotocol" target="_blank">Repositorio GitHub de MCP</a></li>
                    <li><a href="https://github.com/modelcontextprotocol/servers" target="_blank">Directorio de servidores MCP</a></li>
                    <li><a href="https://spec.modelcontextprotocol.io" target="_blank">Especificaci√≥n del protocolo</a></li>
                </ul>

                <nav class="navigation">
                    <a href="04-contexto.html" class="nav-btn">
                        ‚Üê Anterior: Gesti√≥n de Contexto
                    </a>
                    <a href="06-mejores-practicas.html" class="nav-btn">
                        Siguiente: Mejores Pr√°cticas ‚Üí
                    </a>
                </nav>
            </div>
        </div>
    </main>

    <footer>
        <div class="container footer-content">
            <p>&copy; 2025 Claude Code Documentation. Creado con Claude Code.</p>
            <div class="footer-links">
                <a href="https://www.anthropic.com" target="_blank">Anthropic</a>
                <a href="https://docs.anthropic.com" target="_blank">Documentaci√≥n Oficial</a>
                <a href="https://github.com/anthropics/claude" target="_blank">GitHub</a>
            </div>
        </div>
    </footer>

    <script src="assets/js/navigation.js"></script>
    <script src="assets/js/code-copy.js"></script>
</body>
</html>
